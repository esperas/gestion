<mvc:View
          controllerName="ecole.gestion.controller.Suivi"
          xmlns="sap.m"
          xmlns:t="sap.ui.table"
          xmlns:l="sap.ui.layout"
          xmlns:mvc="sap.ui.core.mvc">

    <Page title="{i18n>homePageTitle}"
          showNavButton="true"
		  navButtonPress="onNavBack">

    <Panel >

        <Button icon="sap-icon://document" text="Création d'une entrée" tooltip="Nouvelle entrée"  press="onCreate"/>
        <Button icon="sap-icon://refresh" text="Rafraichir les données" press="onRefresh"/>
        <Button icon="sap-icon://loan" text="Seulement Factures impayées" press="onFilter"/>
        <t:Table
				id="tsuivi"
				selectionMode="None"
				rows="{suivi>/suivi/}"
				visibleRowCount="15"
                enableCellFilter = "true"

				ariaLabelledBy="title">
        <t:title>
			<HBox>
				<items>
					<Title text="Suivi des paiements" titleStyle="H3" class="sapUiTinyMarginBeginEnd"/>
				</items>
			</HBox>
		</t:title>
        <t:noData>
			<Link
				class="sapUiMediumMargin"
				text="No Data found. Press here to reset all filters."
				press="clearAllFilters"/>
        </t:noData>
        <t:columns>
		  <t:Column width="5rem"
                    filterProperty="Date"
                    sorted="true"
                    sortOrder="Descending"
                    sortProperty="date"
                    id="colDate">
		      <Label text="Date" />
			     <t:template>
				    <Text text="{ path: 'suivi>date',
				                  type: 'sap.ui.model.type.Date',
				                  formatOptions: {
					                   style: 'short',
					                   source: {
						                  pattern: 'yyyy-MM-dd'
					                   }
				                  }
                                }"/>
				    </t:template>
		  </t:Column>
        <t:Column width="11rem"
                  defaultFilterOperator="StartsWith"
                  filterProperty="famille">
		  <Label text="Famille" />
		    <t:template>
                <Text text="{suivi>famille}"/>
            </t:template>
		</t:Column>

        <t:Column width="11rem">
		  <Label text="Facture émise" />
		    <t:template>
                <Text text="{suivi>facture}"/>
            </t:template>
		</t:Column>

        <t:Column width="11rem">
		  <Label text="Paiement effectué" />
		    <t:template>
                <Text text="{suivi>paiement}"/>
            </t:template>
		</t:Column>

        <t:Column width="11rem">
		  <Label text="Libellé" />
		    <t:template>
                <Text text="{suivi>libelle}"/>
            </t:template>
		</t:Column>

        <t:Column width="3rem">
		  <Label text="N°Piece" />
		    <t:template>
                <Text text="{suivi>piece}"/>
            </t:template>
		</t:Column>

        <t:Column width="3rem">
		  <Label text="Période" />
		    <t:template>
                <Text text="{suivi>periode}"/>
            </t:template>
		</t:Column>

        <t:Column width="3rem">
		  <Label text="Document" />
		    <t:template>
                <Text text="{suivi>typedoc}"/>
            </t:template>
		</t:Column>

        <t:Column width="3rem">
		  <Label text="Status" />
		    <t:template>
                <Text text="{suivi>status}"/>
            </t:template>
		</t:Column>

        <t:Column width="2rem">
            <t:template>
                <Button icon="sap-icon://edit" press="onDetail"/>
            </t:template>
		</t:Column>
        <t:Column width="2rem">
            <t:template>
                <Button icon="sap-icon://loan"
                        press="onPaiement"
                        visible="{ parts: [{path: 'suivi>typedoc'}, {path: 'suivi>status'}],
		                                      formatter: '.formatter.isPayable'}"
                        />
            </t:template>
		</t:Column>

        </t:columns>


        </t:Table>
    </Panel>
    </Page>
</mvc:View>
